{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="{{ csrf_cookie_value }}" />
    <title>{% block title %}Venue Booking{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'images/favicon.ico' %}" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#38bdf8',
              secondary: '#0f172a'
            },
            fontFamily: {
              sans: ['"Poppins"', 'ui-sans-serif', 'system-ui']
            }
          }
        }
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/forms.css' %}" />
    <link rel="stylesheet" href="{% static 'css/ragaspace.css' %}" />
    <script src="{% static 'js/app.js' %}" defer></script>
    {% block head_extra %}{% endblock %}
  </head>
  <body class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 font-sans text-slate-100">
    <div class="fixed inset-0 -z-10 overflow-hidden">
      <div class="absolute -left-40 top-20 h-96 w-96 rounded-full bg-primary/20 blur-3xl"></div>
      <div class="absolute right-0 top-0 h-[32rem] w-[32rem] rounded-full bg-cyan-500/10 blur-3xl"></div>
      <div class="absolute bottom-0 left-1/2 h-[28rem] w-[28rem] -translate-x-1/2 rounded-full bg-emerald-400/10 blur-3xl"></div>
    </div>
    <div class="relative mx-auto flex min-h-screen w-full max-w-7xl flex-col px-4 py-6 sm:px-8" data-page-shell>
      {% block navbar %}
      <nav class="mb-8 rounded-3xl border border-white/10 bg-white/5 px-6 py-4 shadow-xl shadow-slate-900/50 backdrop-blur-xl" data-animate>
        <div class="flex items-center justify-between gap-4">
          <a href="{% url 'home' %}" class="flex items-center gap-3 text-2xl font-semibold tracking-tight text-white" data-ripple>
            <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-cyan-400/80 to-sky-500/60 p-1 shadow-lg shadow-cyan-500/40 sm:h-12 sm:w-12">
              <img src="{% static 'images/ragaspace-logo.svg' %}" alt="RagaSpace logo" class="h-full w-full object-contain" />
            </span>
            <span class="hidden sm:inline">RagaSpace</span>
          </a>
          <button type="button" class="rounded-2xl border border-white/20 bg-white/10 p-2 text-white transition hover:bg-white/20 md:hidden" data-nav-toggle aria-controls="primary-nav-menu" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="h-6 w-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 7.5h16.5M3.75 12h16.5M3.75 16.5h16.5" />
            </svg>
          </button>
        </div>
        <div id="primary-nav-menu" class="mt-6 hidden flex-col gap-6 text-sm font-medium text-white/80 md:mt-4 md:flex md:flex-row md:items-center md:justify-between md:gap-8">
          <div class="flex flex-col gap-4 md:flex-row md:items-center md:gap-6">
            <a href="{% url 'home' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Home</a>
            {% if not request.user.is_staff %}
            <a href="{% url 'catalog' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Catalog</a>
            {% endif %}
            {% if user.is_authenticated and not request.user.is_staff %}
            <a href="{% url 'wishlist' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Wishlist</a>
            {% endif %}
            {% if user.is_authenticated %}
            <a href="{% url 'booked-places' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Booked places</a>
            {% endif %}
            {% if request.user.is_staff %}
            <a href="{% url 'admin-dashboard' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Admin workspace</a>
            <a href="{% url 'admin-bookings' %}" class="interactive-glow rounded-xl px-3 py-2 transition-colors hover:text-white" data-ripple>Booking approvals</a>
            <a
              href="{% url 'admin-venues' %}?show=create"
              data-modal-target="venue-create-modal"
              class="interactive-glow rounded-2xl bg-primary px-4 py-2 text-sm font-semibold text-white shadow-md shadow-cyan-500/40 transition hover:bg-primary/80"
              data-ripple
              >Add venue</a
            >
            {% endif %}
          </div>
          <div class="flex flex-col gap-4 md:flex-row md:items-center md:gap-6">
            <form method="get" action="{% url 'catalog' %}" class="grid gap-2 rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur-lg md:flex md:items-center md:gap-2 md:border-0 md:bg-transparent md:p-0 md:backdrop-blur-none">
              {{ global_filter_form.city }}
              {{ global_filter_form.category }}
              {{ global_filter_form.max_price }}
              <button type="submit" class="interactive-glow rounded-xl bg-primary/80 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-cyan-500/40 transition hover:bg-primary" data-ripple>
                Search
              </button>
            </form>
            {% if user.is_authenticated %}
            <div class="flex flex-col gap-2 text-white md:items-end">
              <p class="text-xs uppercase tracking-wider text-white/60">Signed in</p>
              <p class="text-lg font-semibold text-white">{{ request.user.username }}</p>
            </div>
            <a href="{% url 'auth:logout' %}" class="interactive-glow rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-slate-900/40 transition hover:bg-white/20" data-ripple>Logout</a>
            {% else %}
            <div class="flex flex-col gap-2 md:flex-row md:items-center md:gap-3">
              <a href="{% url 'auth:login' %}" class="interactive-glow rounded-2xl border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-slate-900/40 transition hover:bg-white/20" data-ripple>Login</a>
              <a href="{% url 'auth:register' %}" class="interactive-glow rounded-2xl bg-primary px-4 py-2 text-sm font-semibold text-white shadow-md shadow-cyan-500/40 transition hover:bg-primary/80" data-ripple>Register</a>
            </div>
            {% endif %}
          </div>
        </div>
      </nav>
      {% endblock %}
      <main class="flex-1">
        {% for message in messages %}
        <div class="flash-message mb-4 rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-sm text-white shadow-lg shadow-slate-900/40 backdrop-blur" data-animate>
          {{ message }}
        </div>
        {% endfor %}
        {% block content %}{% endblock %}
      </main>
      <footer class="mt-12 rounded-3xl border border-white/10 bg-white/5 px-6 py-4 text-center text-xs text-white/60 backdrop-blur-xl" data-animate>
        Crafted for athletes • RagaSpace © {% now 'Y' %}
      </footer>
    </div>
    <div
      id="page-transition"
      class="pointer-events-none fixed inset-0 z-50 flex items-center justify-center bg-slate-950/95 backdrop-blur-2xl transition-all duration-500 ease-out opacity-0 invisible"
    >
      <div class="flex flex-col items-center gap-4 text-white">
        <div class="h-16 w-16 animate-spin-slow rounded-full border-2 border-cyan-400/60 border-t-transparent"></div>
        <p class="text-sm uppercase tracking-[0.6em] text-cyan-100/80">RagaSpace</p>
      </div>
    </div>
  </body>
</html>
